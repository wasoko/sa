(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const Qn=([e,t,n],s)=>["option",{value:e,disabled:!!n,selected:e===s},t],es=(e,t,n,s)=>["select",t,...n.map(r=>Qn(r,s))],tt=(e,t)=>e===t?0:e==null?t==null?0:-1:t==null?e==null?0:1:typeof e.compare=="function"?e.compare(t):typeof t.compare=="function"?-t.compare(e):e<t?-1:e>t?1:0,se=(e,t=n=>n!==void 0?": "+n:"")=>class extends Error{constructor(n){super(e(n)+t(n))}},ts=se(()=>"illegal argument(s)"),W=e=>{throw new ts(e)},ns=se(()=>"index out of bounds"),Ht=e=>{throw new ns(e)},je=(e,t,n)=>(e<t||e>=n)&&Ht(e),At=1/2**32;class ss{float(t=1){return this.int()*At*t}norm(t=1){return(this.int()*At-.5)*2*t}normMinMax(t,n){const s=this.minmax(t,n);return this.float()<.5?s:-s}minmax(t,n){return this.float()*(n-t)+t}minmaxInt(t,n){return t|=0,n|=0,t+(this.float()*(n-t)|0)}}const Ve=Math.random;class rs extends ss{int(){return Ve()*4294967296>>>0}float(t=1){return Ve()*t}norm(t=1){return(Ve()-.5)*2*t}}const is=new rs,at=e=>e!=null&&typeof e!="function"&&e.length!==void 0,It=Object.getPrototypeOf({}),Se="function",Dt="string",q=(e,t)=>{let n;if(e===t)return!0;if(e!=null){if(typeof e.equiv===Se)return e.equiv(t)}else return e==t;if(t!=null){if(typeof t.equiv===Se)return t.equiv(e)}else return e==t;return typeof e===Dt||typeof t===Dt?!1:(n=Object.getPrototypeOf(e),(n==null||n===It)&&(n=Object.getPrototypeOf(t),n==null||n===It)?Jt(e,t):typeof e!==Se&&e.length!==void 0&&typeof t!==Se&&t.length!==void 0?Yt(e,t):e instanceof Set&&t instanceof Set?Kt(e,t):e instanceof Map&&t instanceof Map?Wt(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!==e&&t!==t)},Yt=(e,t,n=q)=>{let s=e.length;if(s===t.length)for(;s-- >0&&n(e[s],t[s]););return s<0},Kt=(e,t,n=q)=>e.size===t.size&&n([...e.keys()].sort(),[...t.keys()].sort()),Wt=(e,t,n=q)=>e.size===t.size&&n([...e].sort(),[...t].sort()),Jt=(e,t,n=q)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let s in e)if(!t.hasOwnProperty(s)||!n(e[s],t[s]))return!1;return!0},he=(e,t)=>e!=null&&typeof e[t]=="function",de=e=>he(e,"xform")?e.xform():e,L=Symbol(),xt=()=>{},H=e=>e!=null&&typeof e[Symbol.iterator]=="function",os=se(()=>"illegal arity"),ht=e=>{throw new os(e)};class ce{constructor(t){this.value=t}deref(){return this.value}}const ls=e=>new ce(e),x=e=>e instanceof ce,dt=e=>e instanceof ce?e:new ce(e),J=e=>e instanceof ce?e.deref():e,cs=e=>e.length===2?[void 0,e[1]]:e.length===3?[e[1],e[2]]:ht(e.length);function pt(...e){const t=e[0],n=t[0],s=t[1],r=t[2];e=cs(e);const i=e[0]==null?n():e[0],o=e[1];return J(s(he(o,"$reduce")?o.$reduce(r,i):at(o)?us(r,i,o):fs(r,i,o)))}const us=(e,t,n)=>{for(let s=0,r=n.length;s<r;s++)if(t=e(t,n[s]),x(t)){t=t.deref();break}return t},fs=(e,t,n)=>{for(let s of n)if(t=e(t,s),x(t)){t=t.deref();break}return t},Le=(e,t)=>[e,n=>n,t];function ue(e){return e?[...e]:Le(()=>[],(t,n)=>(t.push(n),t))}function*pe(e,t){const n=de(e)(ue()),s=n[1],r=n[2];for(let i of t){const o=r([],i);if(x(o)){yield*J(s(o.deref()));return}o.length&&(yield*o)}yield*J(s([]))}function*z(e,t){const n=de(e)([xt,xt,(s,r)=>r])[2];for(let s of t){let r=n(L,s);if(x(r)){r=J(r.deref()),r!==L&&(yield r);return}r!==L&&(yield r)}}const ge=(e,t,n=z)=>{const s=t.length-1;return H(t[s])?t.length>1?n(e.apply(null,t.slice(0,s)),t[s]):n(e(),t[0]):void 0},Y=(e,t)=>[e[0],e[1],t];function S(e,t){return H(t)?z(S(e),t):n=>{const s=n[2];return Y(n,(r,i)=>s(r,e(i)))}}function te(...e){return as(te,pt,e)}const as=(e,t,n)=>{let s,r;switch(n.length){case 4:r=n[3],s=n[2];break;case 3:r=n[2];break;case 2:return S(i=>e(n[0],n[1],i));default:ht(n.length)}return t(de(n[0])(n[1]),s,r)},hs=e=>{const{1:t,2:n}=de(e)(ue());let s=!1;return r=>{if(!s){let i=n([],r);return s=x(i),s&&(i=t(i.deref())),i.length===1?i[0]:i.length>0?i:void 0}}};function Zt(...e){let[t,n,s,r,i,o,c,l,u,f]=e;switch(e.length){case 0:ht(0);case 1:return t;case 2:return(...a)=>t(n(...a));case 3:return(...a)=>t(n(s(...a)));case 4:return(...a)=>t(n(s(r(...a))));case 5:return(...a)=>t(n(s(r(i(...a)))));case 6:return(...a)=>t(n(s(r(i(o(...a))))));case 7:return(...a)=>t(n(s(r(i(o(c(...a)))))));case 8:return(...a)=>t(n(s(r(i(o(c(l(...a))))))));case 9:return(...a)=>t(n(s(r(i(o(c(l(u(...a)))))))));case 10:default:const h=(...a)=>t(n(s(r(i(o(c(l(u(f(...a))))))))));return e.length===10?h:Zt(h,...e.slice(10))}}function F(...e){return e=e.map(de),Zt.apply(null,e)}const Pe=e=>typeof e=="function",ds=e=>e;function Qt(e){return e?pt(Qt(),e):Le(()=>-1/0,(t,n)=>Math.max(t,n))}function en(e){return e?pt(en(),e):Le(()=>1/0,(t,n)=>Math.min(t,n))}function ps(e,t){e=e||"";let n=!0;return t?[...t].join(e):Le(()=>"",(s,r)=>(s=n?s+r:s+e+r,n=!1,s))}const gs=()=>e=>{const t=e[2];return Y(e,(n,s)=>{if(s){for(let r of J(s))if(n=t(n,r),x(n))break}return x(s)?dt(n):n})};function fe(e,t,n){return new ms(e,t,n)}class ms{constructor(t,n,s){t===void 0?(t=0,n=1/0):n===void 0&&(n=t,t=0),s=s===void 0?t<n?1:-1:s,this.from=t,this.to=n,this.step=s}*[Symbol.iterator](){let{from:t,to:n,step:s}=this;if(s>0)for(;t<n;)yield t,t+=s;else if(s<0)for(;t>n;)yield t,t+=s}$reduce(t,n){const s=this.step;if(s>0)for(let r=this.from,i=this.to;r<i&&!x(n);r+=s)n=t(n,r);else for(let r=this.from,i=this.to;r>i&&!x(n);r+=s)n=t(n,r);return n}}function*_s(...e){const t=e.map(n=>n[Symbol.iterator]());for(;;){const n=[];for(let s of t){let r=s.next();if(r.done)return;n.push(r.value)}yield n}}const nt=e=>e>0?e:0,j=e=>e<0?0:e>1?1:e;function tn(e,t){return H(t)?z(tn(e),t):n=>{const s=n[2];let r=e;return Y(n,(i,o)=>r>0?(r--,i):s(i,o))}}function nn(e,t){return H(t)?z(nn(e),t):n=>{const s=n[2];return Y(n,(r,i)=>e(i)?s(r,i):r)}}const D=e=>typeof e=="string",sn=e=>e!=null&&typeof e!="string"&&typeof e[Symbol.iterator]=="function";function st(e,t){return H(t)?pe(st(e),t):F(S(e),gs())}function gt(...e){return ge(gt,e)||(t=>{const n=t[2],s=e[0];let r=e[1]||0;return Y(t,(i,o)=>n(i,s(r++,o)))})}function rn(...e){const t=ge(rn,e,pe);if(t)return t;let n=e[0],s,r;return typeof e[1]=="number"?(r=e[1],s=e[2]):(r=n,s=e[1]),([i,o,c])=>{let l=[],u=0;return[i,f=>(s&&l.length>0&&(f=c(f,l),l=[]),o(f)),(f,h)=>(u<=0?(l.length<n&&l.push(h),l.length===n&&(f=c(f,l),l=r<n?l.slice(r):[],u=r-n)):u--,f)]}}const ys=Math.PI,bs=ys*2;function on(e,t){return H(t)?z(on(e),t):S(Pe(e)?n=>[e(n),n]:n=>[e,n])}function ln(...e){const t=ge(ln,e);if(t)return t;const n=e[0],s=e[1]!==!1;return S(r=>{const i=s?{}:r;for(let o in r)i[o]=n(r[o]);return i})}function cn(e,t){return H(t)?pe(cn(e),t):n=>{const s=n[2];let r=e;return Y(n,(i,o)=>--r>0?s(i,o):r===0?dt(s(i,o)):ls(i))}}function Ss(...e){const[t,n,s,r,i,o,c,l]=e;switch(e.length){case 1:return u=>[t(u)];case 2:return u=>[t(u),n(u)];case 3:return u=>[t(u),n(u),s(u)];case 4:return u=>[t(u),n(u),s(u),r(u)];case 5:return u=>[t(u),n(u),s(u),r(u),i(u)];case 6:return u=>[t(u),n(u),s(u),r(u),i(u),o(u)];case 7:return u=>[t(u),n(u),s(u),r(u),i(u),o(u),c(u)];case 8:return u=>[t(u),n(u),s(u),r(u),i(u),o(u),c(u),l(u)];default:return u=>{let f=new Array(e.length);for(let h=e.length;h-- >0;)f[h]=e[h](u);return f}}}function ws(...e){return S(Ss.apply(null,e.map(hs)))}const G=Array.isArray,vs=se(()=>"illegal state"),un=e=>{throw new vs(e)};function fn(...e){const t=ge(fn,e,pe);if(t)return t;const{key:n,mergeOnly:s,reset:r,all:i,backPressure:o}={key:ds,mergeOnly:!1,reset:!0,all:!0,backPressure:0,...e[1]},c=G(e[0])?new Set(e[0]):e[0],l=new Set,u=new Map;let f={};const h=([a,p,y])=>{let m=!0;return s||o<1?[a,g=>((r&&i&&l.size>0||!r&&m)&&(g=y(g,f),f={},l.clear(),m=!1),p(g)),(g,w)=>{const v=n(w);return c.has(v)&&(f[v]=w,l.add(v),(s||Ot(c,l))&&(g=y(g,f),m=!1,r?(f={},l.clear()):f={...f})),g}]:[a,g=>(i&&l.size>0&&(g=y(g,Tt(u,l)),u.clear(),l.clear()),p(g)),(g,w)=>{const v=n(w);if(c.has(v)){let b=u.get(v);for(!b&&u.set(v,b=[]),b.length>=o&&un(`max back pressure (${o}) exceeded for input: ${String(v)}`),b.push(w),l.add(v);Ot(c,l)&&(g=y(g,Tt(u,l)),m=!1,!x(g)););}return g}]};return h.keys=()=>c,h.clear=()=>{u.clear(),c.clear(),l.clear(),f={}},h.add=a=>{c.add(a)},h.delete=(a,p=!0)=>{u.delete(a),c.delete(a),p&&(l.delete(a),delete f[a])},h}const Ot=(e,t)=>{if(t.size<e.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0},Tt=(e,t)=>{const n={};for(let s of t){const r=e.get(s);n[s]=r.shift(),!r.length&&t.delete(s)}return n},ks=e=>e[e.length-1];function $e(e,t){return H(t)?z($e(e),t):S(n=>n[e])}function an(...e){return e.length>2&&ge(an,e,pe)||(([t,n,s])=>{const[r,i,o]=e[0];let c=e.length>1&&e[1]!=null?e[1]:r();return[t,l=>{let u=i(c);return u!==c&&(l=J(s(l,u))),c=u,n(l)},(l,u)=>(c=o(c,u),x(c)?dt(s(l,c.deref())):s(l,c))]})}const Es=e=>e!=null&&typeof e.deref=="function",Me=e=>Es(e)?e.deref():e,$s=se(()=>"Assertion failed"),mt=(typeof process<"u"&&process.env!==void 0?{}.UMBRELLA_ASSERTS:{}.VITE_UMBRELLA_ASSERTS)?(e,t)=>{if(typeof e=="function"&&!e()||!e)throw new $s(typeof t=="function"?t():t)}:()=>{},hn=e=>typeof e=="number",Rt=Object.getPrototypeOf,me=e=>{let t;return e!=null&&typeof e=="object"&&((t=Rt(e))===null||Rt(t)===null)},As=new Set(["__proto__","prototype","constructor"]),qe=e=>As.has(e),Is=e=>G(e)?e.some(qe):D(e)?e.indexOf(".")!==-1?e.split(".").some(qe):qe(e):!1;function*He(e){for(let t in e)e.hasOwnProperty(t)&&(yield[t,e[t]])}class _t{constructor(t){this._length=0,t&&this.into(t)}get length(){return this._length}get head(){return this._head}[Symbol.iterator](){return Mt("next",this._head)}reverseIterator(){return Mt("prev",this.tail)}clear(){this.release()}compare(t,n=tt){let s=this._length;if(s<t._length)return-1;if(s>t._length)return 1;if(s===0)return 0;{let r=this._head,i=t._head,o=0;for(;s-- >0&&o===0;)o=n(r.value,i.value),r=r.next,i=i.next;return o}}concat(...t){const n=this.copy();for(let s of t)n.into(s);return n}equiv(t){if(!(t instanceof _t||at(t))||this._length!==t.length)return!1;if(!this._length||this===t)return!0;const n=t[Symbol.iterator]();let s=this._head;for(let r=this._length;r-- >0;){if(!q(s.value,n.next().value))return!1;s=s.next}return!0}filter(t){const n=this.empty();return this.traverse(s=>(t(s.value)&&n.append(s.value),!0)),n}find(t){return this.traverse(n=>n.value!==t)}findWith(t){return this.traverse(n=>!t(n.value))}first(){return this._head&&this._head.value}insertSorted(t,n){n=n||tt;for(let s=this._head,r=this._length;r-- >0;){if(n(t,s.value)<=0)return this.insertBefore(s,t);s=s.next}return this.append(t)}into(t){for(let n of t)this.append(n);return this}nth(t,n){const s=this.nthCell(t);return s?s.value:n}nthCellUnsafe(t){let n,s;for(t<=this._length>>>1?(n=this._head,s="next"):(n=this.tail,s="prev",t=this._length-t-1);t-- >0&&n;)n=n[s];return n}peek(){return this.tail&&this.tail.value}$reduce(t,n){let s=this._head;for(let r=this._length;r-- >0&&!x(n);)n=t(n,s.value),s=s.next;return n}reduce(t,n){return this.$reduce(t,n)}release(){let t=this._head;if(!t)return!0;let n;for(let s=this._length;s-- >0;)n=t.next,delete t.value,delete t.prev,delete t.next,t=n;return this._head=void 0,this._length=0,!0}reverse(){let t=this._head,n=this.tail,s=(this._length>>>1)+(this._length&1);for(;t&&n&&s>0;){const r=t.value;t.value=n.value,n.value=r,t=t.next,n=n.prev,s--}return this}setHead(t){const n=this._head;return n?(n.value=t,n):this.prepend(t)}setNth(t,n){const s=this.nthCell(t);return!s&&Ht(t),s.value=n,s}setTail(t){const n=this.tail;return n?(n.value=t,n):this.append(t)}swap(t,n){if(t!==n){const s=t.value;t.value=n.value,n.value=s}return this}toArray(t=[]){return this.traverse(n=>(t.push(n.value),!0)),t}toJSON(){return this.toArray()}toString(){let t=[];return this.traverse(n=>(t.push(String(n.value)),!0)),t.join(", ")}traverse(t,n=this._head,s){if(!this._head)return;let r=n;do{if(!t(r))break;r=r.next}while(r!==s);return r}_map(t,n){return this.traverse(s=>(t.append(n(s.value)),!0)),t}}function*Mt(e,t){for(;t;)yield t.value,t=t[e]}class K extends _t{get tail(){return this._tail}append(t){if(this._tail){const n={value:t,prev:this._tail};return this._tail.next=n,this._tail=n,this._length++,n}else return this.prepend(t)}asHead(t){return t===this._head?this:(this.remove(t),this._head.prev=t,t.next=this._head,t.prev=void 0,this._head=t,this._length++,this)}asTail(t){return t===this._tail?this:(this.remove(t),this._tail.next=t,t.prev=this._tail,t.next=void 0,this._tail=t,this._length++,this)}cons(t){return this.prepend(t),this}copy(){return new K(this)}*cycle(){for(;;)yield*this}drop(){const t=this._head;if(t)return this._head=t.next,this._head?this._head.prev=void 0:this._tail=void 0,this._length--,t.value}empty(){return new K}insertAfter(t,n){const s={value:n,next:t.next,prev:t};return t.next?t.next.prev=s:this._tail=s,t.next=s,this._length++,s}insertAfterNth(t,n){return t<0&&(t+=this._length),t>=this._length-1?this.append(n):(je(t,0,this._length),this.insertAfter(this.nthCellUnsafe(t),n))}insertBefore(t,n){const s={value:n,next:t,prev:t.prev};return t.prev?t.prev.next=s:this._head=s,t.prev=s,this._length++,s}insertBeforeNth(t,n){return t<0&&(t+=this._length),t<=0?this.prepend(n):(je(t,0,this._length),this.insertBefore(this.nthCellUnsafe(t),n))}map(t){return this._map(new K,t)}nth(t,n){const s=this.nthCell(t);return s?s.value:n}nthCell(t){if(t<0&&(t+=this._length),!(t<0||t>=this._length))return this.nthCellUnsafe(t)}pop(){const t=this._tail;if(t)return this._tail=t.prev,this._tail?this._tail.next=void 0:this._head=void 0,this._length--,t.value}prepend(t){const n={value:t,next:this._head};return this._head?this._head.prev=n:this._tail=n,this._head=n,this._length++,n}push(t){return this.append(t),this}release(){return this._tail=void 0,super.release()}remove(t){return t.prev?t.prev.next=t.next:this._head=t.next,t.next?t.next.prev=t.prev:this._tail=t.prev,this._length--,this}rotateLeft(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this._head,this._tail);default:return this.push(this.drop())}}rotateRight(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this._head,this._tail);default:const t=this.peek();return this.pop(),this.prepend(t),this}}seq(t=0,n=this.length){if(t>=n||t<0)return;let s=this.nthCell(t);const r=this.nthCell(n-1),i=o=>({first(){return o.value},next(){return o!==r&&o.next?i(o.next):void 0}});return s?i(s):void 0}shuffle(t,n=is){if(this._length<2)return this;for(t=t!==void 0?t:Math.ceil(1.5*Math.log2(this._length));t>0;t--){let s=this._head;for(;s;){const r=s.next;n.float()<.5?this.asHead(s):this.asTail(s),s=r}}return this}slice(t=0,n=this.length){let s=t<0?t+this._length:t,r=n<0?n+this._length:n;(s<0||r<0)&&W("invalid indices: ${from} / ${to}");const i=new K;let o=this.nthCell(s);for(;o&&++s<=r;)i.push(o.value),o=o.next;return i}sort(t=tt){if(!this._length)return this;let n=1;for(;;){let s=this._head;this._head=void 0,this._tail=void 0;let r=0;for(;s;){r++;let i=s,o=0;for(let l=0;l<n&&(o++,i=i.next,!!i);l++);let c=n;for(;o>0||c>0&&i;){let l;o===0?(l=i,i=i.next,c--):!i||c===0||t(s.value,i.value)<=0?(l=s,s=s.next,o--):(l=i,i=i.next,c--),this._tail?this._tail.next=l:this._head=l,l.prev=this._tail,this._tail=l}s=i}if(this._tail.next=void 0,r<=1)return this;n*=2}}splice(t,n=0,s){let r;typeof t=="number"?(t<0&&(t+=this._length),je(t,0,this._length),r=this.nthCellUnsafe(t)):r=t;const i=new K;if(n>0)for(;r&&n-- >0;)this.remove(r),i.push(r.value),r=r.next;else r&&(r=r.next);if(s)if(r)for(let o of s)this.insertBefore(r,o);else for(let o of s)this.push(o);return i}}function dn(e,t){return t?z(dn(e),t):(e|=0,e<2&&W("period must be >= 2"),n=>{const s=n[2],r=new K;let i=0;return Y(n,(o,c)=>{r.push(c);const l=r.length;return i+=c,l>e&&(i-=r.drop()),l>=e?s(o,i/e):o})})}const Ds=(e,t,n)=>n!==t?(e-t)/(n-t):0,Ye=(e,t,n,s,r)=>s+(r-s)*Ds(e,t,n),xs=se(()=>"unsupported operation"),Os=e=>{throw new xs(e)},Ke={},Ts=(e,t,n,s)=>{const r=Ke[n];mt(!!r,`no conversions available for ${n}`);let i=r[s];return i?i(e,t):Ke.rgb[s]?r.rgb(e,Ke.rgb[s]([],t)):Os(`can't convert: ${s} -> ${n}`)},yt=e=>e-Math.floor(e);function _e(e,t){return!t&&(t={}),(...n)=>{const s=JSON.stringify(n);return s!==void 0?s in t?t[s]:t[s]=e.apply(null,n):e.apply(null,n)}}const pn=_e((e,t)=>e.repeat(t)),Fe=_e((e,t=" ")=>{const n=pn(String(t),e);return(s,r)=>s==null?n:(s=s.toString(),r=r!==void 0?r:s.length,r<e?n.substring(r)+s:s)}),ee=Fe(2,"0");Fe(3,"0");Fe(4,"0");const Rs=_e((e,t=!1)=>t?n=>gn(n)||n.toFixed(e):n=>n.toFixed(e));_e((e,t=3)=>{const n=e-t-1,s=Math.pow(10,n),r=-Math.pow(10,n-1),i=Math.pow(10,-(t-1)),o=Fe(e);return c=>{const l=Math.abs(c);return o(gn(c)||(c===0?"0":l<i||l>=s?Ms(c,e):c.toFixed(t-(c<r?1:0))))}});const Ms=(e,t)=>e.toExponential(Math.max(t-4-(Math.log(Math.abs(e))/Math.LN10>=10?2:1)-(e<0?1:0),0)),gn=e=>isNaN(e)?"NaN":e===1/0?"+∞":e===-1/0?"-∞":void 0,Cs=(e=0)=>t=>(t*100).toFixed(e)+"%",Ns=[3.1338561,-.9787684,.0719453,-1.6168667,1.9161415,-.2289914,-.4906146,.033454,1.4052427],Us=[3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252],Ls=[1.0478112,.0295424,-.0092345,.0228866,.9904844,.0150436,-.050127,-.0170491,.7521316],mn=[.96422,1,.82521],Ps=[.95047,1,1.08883];let P=Rs(3),Ce=Cs(3);const Fs=1/255,B=(e,t=1)=>e!=null?j(e):t,_n=e=>{const t=P(yt(e[0])*360),n=Ce(j(e[1])),s=Ce(j(e[2])),r=B(e[3]);return r<1?`hsla(${t},${n},${s},${P(r)})`:`hsl(${t},${n},${s})`},V=(e,t,n,s,r)=>(!e&&(e=[]),e[0]=t,e[1]=n,e[2]=s,e[3]=r,e),zs=(e,t,n=1)=>V(e||t,yt(t[0]),j(t[1]),j(t[2]),B(t[3],n)),Bs=(e,t)=>{e=zs(e||t,t);const n=e[1],s=e[2],r=(2-n)*s/2;return e[2]=r,e[1]=r&&r<1?n*s/(r<.5?r*2:2-r*2):n,e},Gs=e=>_n(Bs([],e)),Ct="0123456789abcdef",rt=e=>Ct[e>>>4&15]+Ct[e&15],Xs=e=>rt(e>>>8)+rt(e&255),js=e=>rt(e>>>16)+Xs(e),bt=_e((e,t,n="")=>{const s=pn("0",t);return r=>(r=(r>>>0).toString(e),n+(r.length<t?s.substring(r.length)+r:r))});bt(2,8);bt(2,16);bt(2,32);const yn=js,it=e=>{const t=e>>>24;return t<255?`rgba(${e>>16&255},${e>>8&255},${e&255},${P(t*Fs)})`:`#${yn(e&16777215)}`},Vs=e=>(e&255)<<16|e>>16&255|e&4278255360,qs=Vs,bn=(e,t,n)=>{const s=Ce(nt(t[0])),r=P(t[1]*n),i=P(t[2]*n),o=B(t[3]);return`${e}(${s} ${r} ${i}`+(o<1?`/${P(o)})`:")")},Sn=(e,t,n)=>{const s=Ce(nt(t[0])),r=P(nt(t[1])*n),i=P(yt(t[2])*360),o=B(t[3]);return`${e}(${s} ${r} ${i}`+(o<1?`/${P(o)})`:")")},Nt=e=>bn("lab",e,100),We=e=>e>.00885645?Math.cbrt(e):7.787037*e+16/116,Hs=(e,t,n=mn)=>{const s=We(t[0]/n[0]),r=We(t[1]/n[1]),i=We(t[2]/n[2]);return V(e||t,1.16*r-.16,5*(s-r),2*(r-i),B(t[3]))},Ys="io=0,ia=0,so=1,sa=1",Ks=([e,t])=>`${e}*${t}`,Ws=e=>t=>t>1?`${e}[i${e}+${t}*s${e}]`:t==1?`${e}[i${e}+s${e}]`:`${e}[i${e}]`,Js=e=>S(Ws(e),fe()),Zs=e=>S(t=>`${e}[${t}]`,fe()),Qs=(e,t,n,s="a",r="",i="",o="",c=!1)=>[i,te(F(cn(e),gt((l,u)=>t(u,l))),ps(r),_s.apply(null,n.split(",").map(c?Js:Zs))),o,s!==""?`return ${s};`:""],er=(e,t,n,s=n,r="a",i,o,c,l=!1)=>new Function(n,Qs(e,t,s,r,i,o,c,l).join("")),St=e=>er(e,Ks,`o,a,${Ys}`,"o,a","","+","return ",";",!0);St(2);const Je=St(3);St(4);const wn=(e,t,n,s=!1)=>{const r=Je(t,n,0,0,3),i=Je(t,n,1,0,3),o=Je(t,n,2,0,3),c=B(n[3]);return s?V(e||n,j(r),j(i),j(o),c):V(e||n,r,i,o,c)},tr=(e,t)=>wn(e,Ls,t),Ze=e=>{const t=e**3;return t>.008856?t:(e-16/116)/7.787},vn=(e,t,n=mn)=>{const s=(t[0]+.16)/1.16;return V(e||t,Ze(t[1]/5+s)*n[0],Ze(s)*n[1],Ze(s-t[2]/2)*n[2],B(t[3]))},kn=(e,t)=>vn(e,t,Ps),nr=(e,t)=>Hs(e,tr(e,kn(e,t))),sr=(e,t)=>{let{1:n,2:s}=t;s*=bs;const r=B(t[3]);return n>0?V(e||t,t[0],Math.cos(s)*n,Math.sin(s)*n,r):V(e||t,t[0],0,0,r)},En=(e,t,n=Ns)=>wn(e,n,t),rr=(e,t)=>En(e,t,Us),Ut=(e,t)=>En(null,vn(e,t)),ir=(e,t)=>rr(null,kn(e,t)),or=e=>Sn("lch",e,100),lr=e=>bn("oklab",e,1),cr=e=>Sn("oklch",e,1),Qe=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Ae=(e,t)=>V(e||t,Qe(t[0]),Qe(t[1]),Qe(t[2]),B(t[3])),et=(e,t=0)=>(e<0?0:e>1?1:e)*255+.5<<t,ne=e=>{const t=et(e[0]),n=et(e[1]),s=et(e[2]),r=B(e[3]);return r<1?`rgba(${t},${n},${s},${P(r)})`:`#${yn(t<<16|n<<8|s)}`},ur=e=>ne(Ae([],e)),$n={abgr32:e=>it(qs(e[0])),argb32:e=>it(e[0]),hsl:_n,hsv:Gs,lab50:e=>ne(Ae(null,Ut([],e))),lab65:e=>ne(Ae(null,ir([],e))),lch:e=>ne(Ae(null,Ut(null,sr([],e)))),rgb:ur,srgb:ne};({...$n});const fr=(e,t=$n)=>{let n;return D(e)?e:hn(e)?it(e):e.mode?(n=t[e.mode])?n(e):t.rgb(Ts([],e,"rgb",e.mode)):ne(e)};let wt=3;const Lt=e=>wt=e,d=e=>e===(e|0)?String(e):e.toFixed(wt),An=e=>d(e[0])+","+d(e[1]),vt=(e,t=" ")=>e?e.map(An).join(t):"",ar=["font-size","opacity","stroke-width","stroke-miterlimit"],hr=(e,t)=>{let n;for(let s of ar.concat(t))typeof(n=e[s])=="number"&&(e[s]=d(n));return e},I=(e,...t)=>{if(!e)return;const n=dr(e);let s;return(s=e.fill)&&(n.fill=ot(s)),(s=e.stroke)&&(n.stroke=ot(s)),hr(e,t)},dr=e=>{let t;return((t=e.transform)||e.translate||e.scale||e.rotate)&&(t?(e.transform=D(t)?t:`matrix(${[...t].map(d).join(" ")})`,delete e.translate,delete e.rotate,delete e.scale):e.transform=pr(e)),e},pr=e=>{const t=[];let n;return(n=e.translate)&&(t.push(D(n)?n:`translate(${d(n[0])} ${d(n[1])})`),delete e.translate),(n=e.rotate)&&(t.push(D(n)?n:`rotate(${d(n*180/Math.PI)})`),delete e.rotate),(n=e.scale)&&(t.push(D(n)?n:at(n)?`scale(${d(n[0])} ${d(n[1])})`:`scale(${d(n)})`),delete e.scale),t.join(" ")},ot=e=>D(e)?e[0]==="$"?`url(#${e.substring(1)})`:e:fr(e),In=(e,t)=>{const n={};for(let s in e)e.hasOwnProperty(s)&&!t.has(s)&&(n[s]=e[s]);return n},gr=(e,t,n,...s)=>["circle",I({...n,cx:d(e[0]),cy:d(e[1]),r:d(t)}),...s],mr=(e,t,n,s,...r)=>["ellipse",I({...s,cx:d(e[0]),cy:d(e[1]),rx:d(t),ry:d(n)}),...r],_r=/(rgb|hsl)a\(([a-z0-9.-]+),([0-9.%]+),([0-9.%]+),([0-9.]+)\)/,Dn=(e,t,n)=>[e,I(t),...n.map(yr)],yr=([e,t])=>{t=ot(t);let n;const s=_r.exec(t);return s&&(t=`${s[1]}(${s[2]},${s[3]},${s[4]})`,n=s[5]),["stop",{offset:e,"stop-color":t,"stop-opacity":n}]},br=(e,t,n,s,r)=>Dn("linearGradient",{...r,id:e,x1:d(t[0]),y1:d(t[1]),x2:d(n[0]),y2:d(n[1])},s),Sr=(e,t,n,s,r,i,o)=>Dn("radialGradient",{...o,id:e,fx:d(t[0]),fy:d(t[1]),cx:d(n[0]),cy:d(n[1]),fr:d(s),r:d(r)},i),Pt=(e,...t)=>["g",I({...e}),...t],wr=(e,t,n,...s)=>["image",I({...n,"xlink:href":t,x:d(e[0]),y:d(e[1])}),...s],N=(e,t,n,...s)=>["line",I({...n,x1:d(e[0]),y1:d(e[1]),x2:d(t[0]),y2:d(t[1])}),...s],vr=(e,t)=>N([-1e6,e],[1e6,e],t),kr=(e,t)=>N([e,-1e6],[e,1e6],t),Er=180/Math.PI,$r=(e,t,...n)=>{let s=[];for(let r of e)switch(s.push(r[0]),r[0].toLowerCase()){case"a":s.push([d(r[1]),d(r[2]),d(r[3]*Er),r[4]?1:0,r[5]?1:0,d(r[6][0]),d(r[6][1])].join(","));break;case"h":case"v":s.push(d(r[1]));break;case"m":case"l":s.push(An(r[1]));break;case"z":break;default:s.push(vt(r.slice(1),","))}return["path",I({...t,d:s.join("")}),...n]},Ar=(e,t,n=1,s,...r)=>{const i=["g",I(In(s,new Set(["shape","size"]))),...r],o=xn(i,t,n);for(let c of e)i.push(["use",{"xlink:href":o,x:d(c[0]),y:d(c[1])}]);return i},Ir=(e,t,n=1,s,...r)=>{s={start:0,cstride:1,estride:2,...s};const{start:i,cstride:o,estride:c}=s;let l=s&&s.num!=null?s.num:(e.length-i)/c|0;const u=["g",I(In(s,new Set(["start","cstride","estride","shape","size","num"]))),...r],f=xn(u,t,n);for(let h=i;l-- >0;h+=c)u.push(["use",{"xlink:href":f,x:d(e[h]),y:d(e[h+o])}]);return u},xn=(e,t,n)=>{let s;return!t||t[0]!=="#"?(s="_"+(Math.random()*1e6|0).toString(36),e.push(["g",{opacity:0},Dr(t,s,n)]),s="#"+s):s=t,s},Dr=(e,t,n)=>{const s=d(n);if(e==="circle")return["circle",{id:t,cx:0,cy:0,r:s}];const r=d(-n/2);return["rect",{id:t,x:r,y:r,width:s,height:s}]},On=(e,t,...n)=>["polygon",I({...t,points:vt(e)}),...n],Tn=(e,t,...n)=>["polyline",I({fill:"none",points:vt(e),...t}),...n],xr=(e,t,n,s,...r)=>Rn(e,t,n,0,0,s,...r),Rn=(e,t,n,s,r,i,...o)=>(i=I({...i,x:d(e[0]),y:d(e[1]),width:d(t),height:d(n)}),(s>0||r>0)&&(i.rx=d(s),i.ry=d(r)),["rect",i,...o]),Mn="http://www.w3.org/2000/svg",Or="http://www.w3.org/1999/xlink",Ie=(e,t,n,...s)=>["text",I({...n,x:d(e[0]),y:d(e[1])}),t,...s],Tr={alpha:"opacity",dash:"stroke-dasharray",dashOffset:"stroke-dashoffset",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",miterLimit:"stroke-miterlimit",weight:"stroke-width"},Rr={left:"start",right:"end",center:"middle",start:"start",end:"end"},Mr={top:"text-top",bottom:"text-bottom"},Ft=[],De=e=>{if(e==null)return null;if(he(e,"toHiccup"))return De(e.toHiccup());const t=e[0];if(G(t))return e.map(De);let n=Cr(e[1]);n.__prec&&(Ft.push(wt),Lt(n.__prec));let s;switch(e[0]){case"svg":case"defs":case"a":case"g":s=[t,I(n)];for(let r=2,i=e.length;r<i;r++){const o=De(e[r]);o!=null&&s.push(o)}break;case"linearGradient":s=br(n.id,n.from,n.to,e[2],{gradientUnits:n.gradientUnits||"userSpaceOnUse",...n.gradientTransform?{gradientTransform:n.gradientTransform}:null});break;case"radialGradient":s=Sr(n.id,n.from,n.to,n.r1,n.r2,e[2],{gradientUnits:n.gradientUnits||"userSpaceOnUse",...n.gradientTransform?{gradientTransform:n.gradientTransform}:null});break;case"circle":s=gr(e[2],e[3],n,...e.slice(4));break;case"ellipse":s=mr(e[2],e[3][0],e[3][1],n,...e.slice(4));break;case"rect":{const r=e[5]||0;s=Rn(e[2],e[3],e[4],r,r,n,...e.slice(6));break}case"line":s=N(e[2],e[3],n,...e.slice(4));break;case"hline":s=vr(e[2],n);break;case"vline":s=kr(e[2],n);break;case"polyline":s=Tn(e[2],n,...e.slice(3));break;case"polygon":s=On(e[2],n,...e.slice(3));break;case"path":s=$r(e[2],n,...e.slice(3));break;case"text":s=Ie(e[2],e[3],n,...e.slice(4));break;case"img":s=wr(e[3],e[2].src,n,...e.slice(4));break;case"points":s=Ar(e[2],n.shape,n.size,n,...e.slice(3));break;case"packedPoints":s=Ir(e[2],n.shape,n.size,n,...e.slice(3));break;default:s=e}return n.__prec&&Lt(Ft.pop()),s},Cr=e=>{const t={};if(!e)return t;for(let n in e){const s=e[n],r=Tr[n];r?t[r]=s:Nr(t,n,s)}return t},Nr=(e,t,n)=>{switch(t){case"font":{const s=n.indexOf(" ");e["font-size"]=n.substring(0,s),e["font-family"]=n.substring(s+1);break}case"align":e["text-anchor"]=Rr[n];break;case"baseline":e["dominant-baseline"]=Mr[n]||n;break;default:e[t]=n}},Ur=(e,...t)=>(e=I({version:"1.1",xmlns:Mn,"xmlns:xlink":Or,...e},"width","height","stroke-width"),e.__convert&&(delete e.__convert,t=t.map(De)),["svg",e,...t]),Cn=e=>G(e)?e:D(e)?e.length>0?e.split("."):[]:e!=null?[e]:[],Lr=(e,t)=>{if(e==null)return!1;t=Cn(t);for(let n=t.length-1,s=0;s<=n;s++){const r=t[s];if(!e.hasOwnProperty(r)||(e=e[r],e==null&&s<n))return!1}return!0},Pr=e=>(mt(!Is(e),`unsafe path: '${e}'`),e);function Fr(e){const t=Cn(e);Pr(t);let[n,s,r,i]=t;switch(t.length){case 0:return(o,c)=>c;case 1:return(o,c)=>o?(o[n]=c,o):void 0;case 2:return(o,c)=>{let l;return o&&(l=o[n])?(l[s]=c,o):void 0};case 3:return(o,c)=>{let l;return o&&(l=o[n])&&(l=l[s])?(l[r]=c,o):void 0};case 4:return(o,c)=>{let l;return o&&(l=o[n])&&(l=l[s])&&(l=l[r])?(l[i]=c,o):void 0};default:return(o,c)=>{let l=o;const u=t.length-1;for(let f=0;f<u;f++)if(!(l=l[t[f]]))return;return l[t[u]]=c,o}}}const Nn=(e,t,n)=>Fr(t)(e,n),zr=/^(function\s+\w+)?\s*\(\{([\w\s,:]+)\}/;function Br(e,t){const n={prefix:"@",unwrap:!0,...t};return me(e)?Un(e,n):G(e)?Ln(e,n):e}const Un=(e,t,n,s=[],r={},i=[])=>{n=n||e;for(let o in e)ae(n,[...s,o],r,i,t);return!t.unwrap||s.length?e:Fn(e,r)},Ln=(e,t,n,s=[],r={},i=[])=>{n=n||e;for(let o=0,c=e.length;o<c;o++)ae(n,[...s,o],r,i,t);return!t.unwrap||s.length?e:Fn(e,r)},ae=(e,t,n,s,r)=>{const i=t.join("/");s.indexOf(i)>=0&&W(`cyclic references not allowed: ${i}`);let[o,c]=Pn(e,t);if(!n[i]){if(c)return n[i]=!0,o;let l=L;s.push(i),me(o)?Un(o,{...r,unwrap:!1},e,t,n,s):G(o)?Ln(o,{...r,unwrap:!1},e,t,n,s):!r.onlyFnRefs&&D(o)&&o.startsWith(r.prefix)?l=ae(e,zt(t,o,r.prefix.length),n,s,r):Pe(o)?l=Xr(o,u=>ae(e,zt(t,u,0),n,s,r),i,n):Lr(e,t)||(o=Gr(e,t,n,s,r)),l!==L&&(Nn(e,t,l),o=l),n[i]=!0,s.pop()}return o},Gr=(e,t,n,s,r)=>{let i=s.pop(),o;for(let c=1,l=t.length;c<=l;c++)o=ae(e,t.slice(0,c),n,s,r);return s.push(i),o},Xr=(e,t,n,s)=>{const r=zr.exec(e.toString());let i;if(r){const o=r[2].replace(/\s|(,\s*$)/g,"").split(/,/g).map(c=>c.split(":")[0]).reduce((c,l)=>(c[l]=t(l),c),{});i=e(o,t)}else i=e(t);return kt(i,n,s),i},kt=(e,t,n)=>{n[t]=!0,me(e)?jr(e,t,n):G(e)&&Vr(e,t,n)},jr=(e,t,n)=>{let s,r;for(let i in e)s=e[i],r=t+"/"+i,kt(s,r,n)},Vr=(e,t,n)=>{let s,r;for(let i=0,o=e.length;i<o;i++)s=e[i],r=t+"/"+i,kt(s,r,n)},zt=(e,t,n=1)=>{if(t.charAt(n)==="/")return t.substring(n+1).split("/");e=e.slice(0,e.length-1);const s=t.substring(n).split("/");for(let r=0,i=s.length;r<i;r++)if(s[r]==="..")!e.length&&W(`invalid lookup path: ${t}`),e.pop();else return e.concat(s.slice(r));return!e.length&&W(`invalid lookup path: ${t}`),e};class Bt{constructor(t){this._value=t}deref(){return this._value}}const Pn=(e,t)=>{const n=t.length-1;let s=e,r=e instanceof Bt;for(let i=0;s!=null&&i<=n;i++)s=s[t[i]],s instanceof Bt&&(r=!0,s=s.deref());return[s,r]},Fn=(e,t)=>{for(let n in t){const s=n.split("/"),r=Pn(e,s);r[1]&&Nn(e,s,r[0])}return e};var $;(function(e){e[e.IDLE=0]="IDLE",e[e.ACTIVE=1]="ACTIVE",e[e.DONE=2]="DONE",e[e.UNSUBSCRIBED=3]="UNSUBSCRIBED",e[e.ERROR=4]="ERROR"})($||($={}));var U;(function(e){e[e.NEVER=0]="NEVER",e[e.FIRST=1]="FIRST",e[e.LAST=2]="LAST"})(U||(U={}));var lt;(function(e){e[e.FINE=0]="FINE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.SEVERE=4]="SEVERE",e[e.NONE=5]="NONE"})(lt||(lt={}));const zn=Object.freeze({level:lt.NONE,fine(){},debug(){},info(){},warn(){},severe(){}});let qr=0;const Hr=()=>qr++,Z=(e,t)=>!t||!t.id?{...t,id:e+"-"+Hr()}:t;let R=zn;class Q{constructor(t,n){this.wrapped=t,this.last=L,this.state=$.IDLE,this.subs=[],n=Z("sub",{closeIn:U.LAST,closeOut:U.LAST,cache:!0,...n}),this.parent=n.parent,this.id=n.id,this.closeIn=n.closeIn,this.closeOut=n.closeOut,this.cacheLast=n.cache,n.xform&&(this.xform=n.xform(ue()))}deref(){return this.last!==L?this.last:void 0}getState(){return this.state}setState(t){this.state=t}subscribe(t,n={}){this.ensureState();let s;return t instanceof Q&&!n.xform?(t.ensureState(),mt(!t.parent,`sub '${t.id}' already has a parent`),t.parent=this,s=t):s=new Q(t,{...n,parent:this}),this.subs.push(s),this.setState($.ACTIVE),s.setState($.ACTIVE),this.last!=L&&s.next(this.last),s}transform(...t){let n,s;return me(ks(t))&&(s=t.pop(),n={error:s.error}),this.subscribe(n,Z("xform",t.length>0?{...s,xform:F(...t)}:s))}map(t,n){return this.transform(S(t),n||{})}unsubscribe(t){return t?this.unsubscribeChild(t):this.unsubscribeSelf()}unsubscribeSelf(){return R.debug(this.id,"unsub self"),this.parent&&this.parent.unsubscribe(this),this.state<$.UNSUBSCRIBED&&(this.state=$.UNSUBSCRIBED),this.release(),!0}unsubscribeChild(t){R.debug(this.id,"unsub child",t.id);const n=this.subs.indexOf(t);return n>=0?(this.subs.splice(n,1),(this.closeOut===U.FIRST||!this.subs.length&&this.closeOut!==U.NEVER)&&this.unsubscribe(),!0):!1}next(t){this.state>=$.DONE||(this.xform?this.dispatchXform(t):this.dispatch(t))}done(){R.debug(this.id,"entering done()"),!(this.state>=$.DONE)&&(this.xform&&!this.dispatchXformDone()||(this.state=$.DONE,this.dispatchTo("done")&&this.state<$.UNSUBSCRIBED&&this.unsubscribe(),R.debug(this.id,"exiting done()")))}error(t){const n=this.wrapped,s=n&&n.error;return s&&R.debug(this.id,"attempting wrapped error handler"),s&&n.error(t)||this.unhandledError(t)}unhandledError(t){return(R!==zn?R:console).warn(this.id,"unhandled error:",t),this.unsubscribe(),this.state=$.ERROR,!1}dispatchTo(t,n){let s=this.wrapped;if(s)try{s[t]&&s[t](n)}catch(i){if(!this.error(i))return!1}const r=t==="next"?this.subs:[...this.subs];for(let i=r.length;i-- >0;){s=r[i];try{s[t]&&s[t](n)}catch(o){if(t==="error"||!s.error||!s.error(o))return this.unhandledError(o)}}return!0}dispatch(t){R.debug(this.id,"dispatch",t),this.cacheLast&&(this.last=t),this.dispatchTo("next",t)}dispatchXform(t){let n;try{n=this.xform[2]([],t)}catch(s){this.error(s);return}this.dispatchXformVals(n)&&x(n)&&this.done()}dispatchXformDone(){let t;try{t=this.xform[1]([])}catch(n){return this.error(n)}return this.dispatchXformVals(t)}dispatchXformVals(t){const n=J(t);for(let s=0,r=n.length;s<r&&this.state<$.DONE;s++)this.dispatch(n[s]);return this.state<$.ERROR}ensureState(){this.state>=$.DONE&&un(`operation not allowed in state ${this.state}`)}release(){this.subs.length=0,delete this.parent,delete this.xform,delete this.last}}function Et(e,t){return new Bn(e,t)}const ye=(e,t)=>{const n=new Bn(t);return n.next(e),n};class Bn extends Q{constructor(t,n){const[s,r]=Pe(t)?[t,n||{}]:[void 0,t||{}];super(r.error?{error:r.error}:void 0,Z("stream",r)),this.src=s,this._inited=!1}subscribe(t,n={}){const s=super.subscribe(t,n);if(!this._inited){if(this.src)try{this._cancel=this.src(this)||(()=>{})}catch(r){let i=this.wrapped;(!i||!i.error||!i.error(r))&&this.unhandledError(r)}this._inited=!0}return s}unsubscribe(t){const n=super.unsubscribe(t);return n&&(!t||(!this.subs||!this.subs.length)&&this.closeOut!==U.NEVER)&&this.cancel(),n}done(){this.cancel(),super.done(),delete this.src,delete this._cancel}error(t){return super.error(t)?!0:(this.cancel(),!1)}cancel(){if(this._cancel){R.debug(this.id,"cancel");const t=this._cancel;delete this._cancel,t()}}}const Yr=(e,t)=>e===U.FIRST||e===U.LAST&&!t,Kr=(e,t,n=!1,s)=>Et(r=>{let i=o=>r.next(o);return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)},Z(`event-${t}`,s)),Wr=(e,t)=>{let n=!0;for(let s of t)n=e.removeID(s)&&n;return n},ze=e=>new Jr(e);class Jr extends Q{constructor(t){const n=fn(new Set,{key:r=>r[0],mergeOnly:t.mergeOnly===!0,reset:t.reset===!0,all:t.all!==!1,backPressure:t.backPressure||0}),s=ln(r=>r[1]);super(void 0,Z("streamsync",{...t,xform:t.xform?F(n,s,t.xform):F(n,s)})),this.sources=new Map,this.realSourceIDs=new Map,this.invRealSourceIDs=new Map,this.idSources=new Map,this.psync=n,this.clean=!!t.clean,t.src&&this.addAll(t.src)}add(t,n){n||(n=t.id),this.ensureState(),this.psync.add(n),this.realSourceIDs.set(n,t.id),this.invRealSourceIDs.set(t.id,n),this.idSources.set(t.id,t),this.sources.set(t,t.subscribe({next:s=>s[1]instanceof Q?this.add(s[1]):this.next(s),done:()=>this.markDone(t),__owner:this},{xform:on(n),id:`in-${n}`}))}addAll(t){for(let n in t)this.psync.add(n);for(let n in t)this.add(t[n],n)}remove(t){const n=this.sources.get(t);if(n){const s=this.invRealSourceIDs.get(t.id);return R.info(`removing src: ${t.id} (${s})`),this.psync.delete(s,this.clean),this.realSourceIDs.delete(s),this.invRealSourceIDs.delete(t.id),this.idSources.delete(t.id),this.sources.delete(t),n.unsubscribe(),!0}return!1}removeID(t){const n=this.getSourceForID(t);return n?this.remove(n):!1}removeAll(t){for(let s of t)this.psync.delete(this.invRealSourceIDs.get(s.id));let n=!0;for(let s of t)n=this.remove(s)&&n;return n}removeAllIDs(t){return Wr(this,t)}getSourceForID(t){return this.idSources.get(this.realSourceIDs.get(t))}getSources(){const t={};for(let[n,s]of this.idSources)t[this.invRealSourceIDs.get(n)]=s;return t}unsubscribe(t){if(!t){R.debug(this.id,"unsub sources");for(let n of this.sources.values())n.unsubscribe();this.sources.clear(),this.psync.clear(),this.realSourceIDs.clear(),this.invRealSourceIDs.clear(),this.idSources.clear()}return super.unsubscribe(t)}markDone(t){this.remove(t),Yr(this.closeIn,this.sources.size)&&this.done()}}const Zr=(e,t)=>(t=Z("interval",{num:1/0,...t}),Et(n=>{let s=0,r=t.num;n.next(s++);let i=setInterval(()=>{n.next(s++),--r<=0&&(clearInterval(i),n.closeIn!==U.NEVER&&n.done())},e);return()=>clearInterval(i)},t)),Qr=e=>new ei(e);class ei extends Q{constructor(t={}){super(void 0,Z("resolve")),this.outstanding=0,this.fail=t.fail}next(t){this.outstanding++,t.then(n=>{this.state<$.DONE?(this.dispatch(n),--this.outstanding===0&&this.done()):R.warn(`resolved value in state ${this.state} (${t})`)},n=>{this.fail?this.fail(n):this.error(n)})}done(){this.parent&&this.parent.getState()===$.DONE&&this.outstanding===0&&super.done()}}const ti=e=>({next(t){e?console.log(e,t):console.log(t)},done(){e?console.log(e,"done"):console.log("done")},error(t){return e?console.log(e,"error",t):console.log("error",t),!1}});let we,ve,ni=[],si=[];const ri=e=>we&&we.length>=e?we:we=new Int32Array(e),ii=e=>ve&&ve.length>=e?ve:ve=new Int32Array(e),Gt=(e,t,n,s,r)=>{const i=t.length,o=e.linear;if(e.distance=i,r!=="only-distance"){for(let c=0,l=0;c<i;c++,l+=3)o[l]=s,o[l+1]=c,o[l+2]=t[c];if(r==="full"){const c=e[n];for(let l=0;l<i;l++)c[l]=t[l]}}return e},oi=(e,t,n="full",s=q)=>{const r={distance:0,adds:{},dels:{},const:{},linear:[]};if(e===t||e==null&&t==null)return r;if(e==null||e.length===0)return Gt(r,t,"adds",1,n);if(t==null||t.length===0)return Gt(r,e,"dels",-1,n);const i=e.length>=t.length;let o,c,l,u;i?(o=t,c=e):(o=e,c=t),l=o.length,u=c.length;const f=l+1,h=u-l,a=h+f,p=l+u+3,y=ii(p).fill(-1,0,p),m=ri(p).fill(-1,0,p),g=ni,w=si,v=(M,C,k)=>{let _,O;C>k?(_=y[M-1],O=C):(_=y[M+1],O=k);let T=O-(M-f);for(;T<l&&O<u&&s(o[T],c[O]);)T++,O++;y[M]=w.length/3,w.push(T,O,_),m[M]=O};let b=-1,A;do{for(b++,A=-b+f;A<a;A++)v(A,m[A-1]+1,m[A+1]);for(A=a+b;A>a;A--)v(A,m[A-1]+1,m[A+1]);v(a,m[a-1]+1,m[a+1])}while(m[a]!==u);if(r.distance=h+2*b,n!=="only-distance"){for(b=y[a]*3;b>=0;)g.push(b),b=w[b+2]*3;n==="full"?li(g,w,r,o,c,i):ci(g,w,r,o,c,i,n==="only-distance-linear")}return g.length=0,w.length=0,r},li=(e,t,n,s,r,i)=>{const o=n.linear,c=n.const;let l=e.length,u=0,f=0,h,a,p,y;for(i?(h=n.dels,a=n.adds,p=-1,y=1):(h=n.adds,a=n.dels,p=1,y=-1);l-- >0;){const m=e[l],g=t[m],w=t[m+1],v=w-g;for(;u<g||f<w;){const b=f-u;v>b?(o.push(p,f,h[f]=r[f]),f++):v<b?(o.push(y,u,a[u]=s[u]),u++):(o.push(0,u,c[u]=s[u]),u++,f++)}}},ci=(e,t,n,s,r,i,o)=>{const c=n.linear,l=i?-1:1,u=i?1:-1;let f=e.length,h=0,a=0;for(;f-- >0;){const p=e[f],y=t[p],m=t[p+1],g=m-y;for(;h<y||a<m;){const w=a-h;g>w?(c.push(l,a,r[a]),a++):g<w?(c.push(u,h,s[h]),h++):(o&&c.push(0,h,s[h]),h++,a++)}}},ui=(e,t,n="full",s=q)=>e===t?{distance:0}:n==="only-distance"?fi(e,t,s):ai(e,t,s),fi=(e,t,n)=>{e||(e={}),t||(t={});let s=0;for(let r in e){const i=t[r];(i===void 0||!n(e[r],i))&&s++}for(let r in t)!(r in e)&&s++;return{distance:s}},ai=(e,t,n)=>{e||(e={}),t||(t={});let s=0;const r=[],i=[],o=[];for(let c in e){const l=t[c];l===void 0?(i.push(c),s++):n(e[c],l)||(o.push(c,l),s++)}for(let c in t)c in e||(r.push(c),s++);return{distance:s,adds:r,dels:i,edits:o}},Be=Array.isArray,hi=Math.max,Xt=Object.getPrototypeOf({}),ke="function",Ne="string",jt=(()=>{const e=new Array(2048);for(let t=2,n=e.length;t<n;t++)e[t]=t-2;return e})(),di=e=>{if(e<=jt.length)return jt.slice(0,e);const t=new Array(e);for(;e-- >2;)t[e]=e-2;return t},Gn=(e,t,n,s,r,i=0)=>{const o=r[1];if(o.__skip)return;if(o.__diff===!1){oe(s),t.replaceChild(e,n,i,r);return}const c=s[1];if(c&&c.__skip){t.replaceChild(e,n,i,r,!1);return}let l=o.__impl;if(l&&l!==t)return l.diffTree(e,l,n,s,r,i);const u=oi(s,r,"only-distance-linear",ie);if(u.distance===0)return;const f=u.linear,h=t.getChild(n,i);let a,p,y;if(f[0]!==0||s[1].key!==o.key){oe(s),t.replaceChild(e,n,i,r);return}if((y=s.__release)&&y!==r.__release&&oe(s),f[3]!==0&&(yi(t,h,s[1],r[1]),u.distance===2))return;const m=f.length,g=s.length-1,w=bi(f),v=di(g+1);for(a=6;a<m;a+=3)p=f[a],p&&(p===-1?pi(e,t,h,s,r,f,a,w,v,g):gi(e,t,h,f,a,w,v,g));(y=r.__init)&&y!=s.__init&&y.apply(r,[h,...r.__args])},pi=(e,t,n,s,r,i,o,c,l,u)=>{const f=i[o+2];if(Be(f)){let h=f[1].key;if(h!==void 0&&c[h][2]!==void 0){const a=c[h];h=a[0],Gn(e,t,n,s[h],r[a[2]],l[h])}else{const a=i[o+1];oe(f),t.removeChild(n,l[a]),mi(l,u,a)}}else typeof f===Ne&&t.setContent(n,"")},gi=(e,t,n,s,r,i,o,c)=>{const l=s[r+2];if(typeof l===Ne)t.setContent(n,l);else if(Be(l)){const u=l[1].key;if(u===void 0||i[u][0]===void 0){const f=s[r+1];t.createTree(e,n,l,o[f]),_i(o,c,f)}}},mi=(e,t,n)=>{for(;t>n;t--)e[t]=hi(e[t]-1,0)},_i=(e,t,n)=>{for(;t>=n;t--)e[t]++},yi=(e,t,n,s)=>{const r=ui(n,s,"full",q);e.removeAttribs(t,r.dels,n);let i=L,o,c,l;for(l=r.edits,o=l.length;(o-=2)>=0;)c=l[o],c[0]==="o"&&c[1]==="n"&&e.removeAttribs(t,[c],n),c!=="value"?e.setAttrib(t,c,l[o+1],s):i=l[o+1];for(l=r.adds,o=l.length;o-- >0;)c=l[o],c!=="value"?e.setAttrib(t,c,s[c],s):i=s[c];i!==L&&e.setAttrib(t,"value",i,s)},oe=e=>{if(Be(e)){let t;if((t=e[1])&&t.__release===!1)return;for(e.__release&&(e.__release.apply(e.__this,e.__args),delete e.__release),t=e.length;t-- >2;)oe(e[t])}},bi=e=>{let t,n,s;const r={};for(let i=e.length;(i-=3)>=0;)n=e[i+2],Be(n)&&(t=n[1].key)!==void 0&&(s=r[t],!s&&(r[t]=s=[,,]),s[e[i]+1]=e[i+1]);return r},ie=(e,t)=>{let n;if(e===t)return!0;if(e!=null){if(typeof e.equiv===ke)return e.equiv(t)}else return e==t;if(t!=null){if(typeof t.equiv===ke)return t.equiv(e)}else return e==t;return typeof e===Ne||typeof t===Ne?!1:(n=Object.getPrototypeOf(e),(n==null||n===Xt)&&(n=Object.getPrototypeOf(t),n==null||n===Xt)?!(e.__diff===!1||t.__diff===!1)&&Jt(e,t,ie):typeof e!==ke&&e.length!==void 0&&typeof t!==ke&&t.length!==void 0?Yt(e,t,ie):e instanceof Set&&t instanceof Set?Kt(e,t,ie):e instanceof Map&&t instanceof Map?Wt(e,t,ie):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!==e&&t!==t)},Si=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/,wi={button:1,option:1,script:1,style:1,text:1,textarea:1,title:1},$t=e=>e.split(" ").reduce((t,n)=>(t[n]=!0,t),{}),vi=$t("animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view");$t("area base br col command embed hr img input keygen link meta param source stop track use wbr ?xml");$t("animate circle ellipse line path polygon polyline rect");const ki=e=>{let t="",n;for(let s in e)n=Me(e[s]),Pe(n)&&(n=n(e)),n!=null&&(t+=`${s}:${n};`);return t},Ei=e=>Object.keys(e).reduce((t,n)=>(t.push(`${n}: ${e[n]}`),t),[]).join(" "),Ge=G,Xn=sn,jn=D,Vn=(e,t)=>t.__init&&t.__init.apply(t.__this,[e,...t.__args]),xe=(e,t,n,s,r,i=!0)=>{if(Ge(s)){const o=s[0];if(typeof o=="function")return xe(e,t,n,o.apply(null,[e.ctx,...s.slice(1)]),r);const c=s[1];if(c.__impl)return c.__impl.createTree(e,n,s,r,i);const l=t.createElement(n,o,c,r);if(s.length>2){const u=s.length;for(let f=2;f<u;f++)xe(e,t,l,s[f],void 0,i)}return i&&Vn(l,s),l}if(Xn(s)){const o=[];for(let c of s)o.push(xe(e,t,n,c,r,i));return o}return s==null?n:t.createTextElement(n,s)},Oe=(e,t,n,s,r=0)=>{if(Ge(s)){const i=t.getChild(n,r);typeof s[0]=="function"&&Oe(e,t,n,s[0].apply(null,[e.ctx,...s.slice(1)]),r);const o=s[1];if(o.__impl)return o.__impl.hydrateTree(e,n,s,r);Vn(i,s);for(let c in o)c[0]==="o"&&c[1]==="n"&&t.setAttrib(i,c,o[c]);for(let c=s.length,l=2;l<c;l++)Oe(e,t,i,s[l],l-2)}else if(Xn(s))for(let i of s)Oe(e,t,n,i,r),r++},$i=(e,t,n,s)=>{const r=vi[t]?document.createElementNS(Mn,t):document.createElement(t);return n&&Oi(r,n),qn(e,r,s)},Ai=(e,t,n)=>qn(e,document.createTextNode(t),n),qn=(e,t,n)=>e?n===void 0?e.appendChild(t):e.insertBefore(t,e.children[n]):t,Ii=(e,t)=>e.children[t],Di=(e,t,n,s,r,i=!0)=>(t.removeChild(n,s),t.createTree(e,n,r,s,i)),xi=(e,t)=>e.textContent=t,Oi=(e,t)=>{for(let n in t)Hn(e,n,t[n],t);return e},Hn=(e,t,n,s)=>{if(he(n,"deref")&&(n=n.deref()),t.startsWith("__"))return;const r=t[0]==="o"&&t[1]==="n";if(!r&&typeof n=="function"&&(n=n(s)),n!==void 0&&n!==!1)switch(t){case"style":Mi(e,n);break;case"value":Ti(e,n);break;case"prefix":e.setAttribute(t,jn(n)?n:Ei(n));break;case"accesskey":e.accessKey=n;break;case"contenteditable":e.contentEditable=n;break;case"tabindex":e.tabIndex=n;break;case"align":case"autocapitalize":case"checked":case"dir":case"draggable":case"hidden":case"id":case"lang":case"namespaceURI":case"scrollTop":case"scrollLeft":case"title":e[t]=n;break;default:r?Ci(e,t.substring(2),n):e.setAttribute(t,n===!0?"":n)}else e.hasAttribute(t)?e.removeAttribute("title"):e[t]&&(e[t]=null);return e},Ti=(e,t)=>{let n;switch(e.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if((n=e.value)!==void 0&&typeof t=="string"){const s=t.length-(n.length-(e.selectionStart||0));e.value=t,e.selectionStart=e.selectionEnd=s;break}default:e.value=t}},Ri=(e,t,n)=>{for(let s=t.length;s-- >0;){const r=t[s];r[0]==="o"&&r[1]==="n"?Ni(e,r.substring(2),n[r]):e.hasAttribute(r)?e.removeAttribute(r):e[r]=null}},Mi=(e,t)=>(e.setAttribute("style",ki(t)),e),Ci=(e,t,n)=>jn(n)?e.setAttribute("on"+t,n):Ge(n)?e.addEventListener(t,...n):e.addEventListener(t,n),Ni=(e,t,n)=>Ge(n)?e.removeEventListener(t,...n):e.removeEventListener(t,n),Ui=(e,t)=>{const n=e.children[t];n!==void 0&&e.removeChild(n)},Vt=(e,t)=>{if(t=Me(t),t==null)return e;if(D(t))return e+" "+t;const n=new Set(e.split(" "));for(let s in t)Me(t[s])?n.add(s):n.delete(s);return[...n].join(" ")},Li=(e,t,n)=>{t&&(e.id=t);let s=Me(e.class);return n?(n=n.replace(/\./g," "),e.class=s?Vt(n,s):n):s&&(e.class=D(s)?s:Vt("",s)),e},Ue=G,Pi=sn,Fi=me,zi=(e,t)=>{let n=e[0],s=Fi(e[1]),r,i,o;return(typeof n!="string"||!(r=Si.exec(n)))&&W(`${n} is not a valid tag name`),i=r[1],n===i&&s&&(!t||e[1].key)?e:(o=Li(s?{...e[1]}:{},r[2],r[3]),o.__skip&&e.length<3?[i,o]:[i,o,...e.slice(s?2:1)])},Bi=(e,t)=>X(t,e,e.ctx,[0],e.keys!==!1,e.span!==!1),X=(e,t,n,s,r,i)=>{if(e!=null){if(Ue(e)){if(e.length===0)return;let o,c=e[1],l;if(c&&(l=c.__impl)&&(l=l.normalizeTree))return l(t,e);const u=e[0];if(typeof u=="function")return X(u.apply(null,[n,...e.slice(1)]),t,n,s,r,i);if(typeof u.render=="function"){const f=[n,...e.slice(1)];return o=X(u.render.apply(u,f),t,n,s,r,i),Ue(o)&&(o.__this=u,o.__init=u.init,o.__release=u.release,o.__args=f),o}return o=zi(e,r),c=o[1],c.__normalize===!1?o:(r&&c.key===void 0&&(c.key=s.join("-")),o.length>2?Gi(o,c,t,n,s,r,i):o)}return typeof e=="function"?X(e(n),t,n,s,r,i):typeof e.toHiccup=="function"?X(e.toHiccup(t.ctx),t,n,s,r,i):typeof e.deref=="function"?X(e.deref(),t,n,s,r,i):i?["span",r?{key:s.join("-")}:{},e.toString()]:e.toString()}},Gi=(e,t,n,s,r,i,o)=>{const c=e[0],l=[c,t];o=o&&!wi[c];for(let u=2,f=2,h=0,a=e.length;u<a;u++){let p=e[u];if(p!=null){const y=Ue(p);if(y&&Ue(p[0])||!y&&Pi(p))for(let m of p)m=X(m,n,s,r.concat(h),i,o),m!==void 0&&(l[f++]=m),h++;else p=X(p,n,s,r.concat(h),i,o),p!==void 0&&(l[f++]=p),h++}}return l},Xi={createTree(e,t,n,s,r){return xe(e,this,t,n,s,r)},hydrateTree(e,t,n,s){return Oe(e,this,t,n,s)},diffTree(e,t,n,s,r){Gn(e,this,t,n,s,r)},normalizeTree:Bi,getElementById(e){return document.getElementById(e)},getChild:Ii,createElement:$i,createTextElement:Ai,replaceChild(e,t,n,s,r){Di(e,this,t,n,s,r)},removeChild:Ui,setContent:xi,removeAttribs:Ri,setAttrib:Hn},ji=(e,t)=>D(e)?t.getElementById(e):e,Vi=(e,t)=>{if(e==null||!t||!t.length)return e;const n={...e};for(let s of t){const r=n[s];he(r,"deref")&&(n[s]=r.deref())}return n},qi=(e={},t=Xi)=>{const n={root:"app",...e},s=ji(n.root,t);return an([()=>[],r=>r,(r,i)=>(n.ctx=Vi(e.ctx,n.autoDerefKeys),i=t.normalizeTree(n,i),i!=null?(n.hydrate?(t.hydrateTree(n,s,i),n.hydrate=!1):t.diffTree(n,s,r,i,0),i):r)])};function Yn(e,t){if(t)return z(Yn(e),t);e|=0,e<2&&W("period must be >= 2");const n=2/(e+1);return s=>{const r=s[2];let i=[],o,c=0;return Y(s,(l,u)=>o!=null?(o+=(u-o)*n,s[2](l,o)):(i.push(u),c+=u,i.length==e?(o=c/e,i=null,r(l,o)):l))}}const Hi=(e,t)=>{let n=0;for(let s=e.length-1;s>=0;s--)n+=e[s]*t[s];return n};function le(e,t){if(t)return z(le(e),t);let n,s;return hn(e)?(n=e|0,e=[...fe(1,n+1)],s=n*(n+1)/2):(n=e.length,s=e.reduce((r,i)=>r+i,0)),F(rn(n,1),S(r=>Hi(r,e)/s))}function Kn(e,t){return t?z(Kn(e),t):F(ws(le(e/2|0),le(e)),tn(e-1),S(n=>2*n[0]-n[1]),le(Math.sqrt(e)))}const Wn={1:"Minute",60:"Hour",1440:"Day"},Yi=[["ADAUSD","ADA-USD"],["BTCUSD","BTC-USD"],["ETHUSD","ETH-USD"],["LTCUSD","LTC-USD"],["XLMUSD","XLM-USD"],["XMRUSD","XMR-USD"],["XTZUSD","XTZ-USD"]],Jn={ema:{fn:Yn,label:"Exponential"},hma:{fn:Kn,label:"Hull"},sma:{fn:dn,label:"Simple"},wma:{fn:le,label:"Weighted"}},E=80,re=60,qt=60*60*24,Ki={1:15*60,60:qt,1440:qt*14},Wi={1:e=>{const t=new Date(e*1e3);return`${ee(t.getUTCHours())}:${ee(t.getUTCMinutes())}`},60:e=>{const t=new Date(e*1e3);return`${t.getUTCFullYear()}-${ee(t.getUTCMonth()+1)}-${ee(t.getUTCDate())}`},1440:e=>{const t=new Date(e*1e3);return`${t.getUTCFullYear()}-${ee(t.getUTCMonth()+1)}-${ee(t.getUTCDate())}`}},Zn={light:{id:"light",label:"Light",bg:"white",body:"black",chart:{axis:"#000",price:"#006",pricelabel:"#fff",bull:"#6c0",bear:"#f04",sma12:"#f90",sma24:"#0ff",sma50:"#06f",sma72:"#00f",gridMajor:"#666",gridMinor:"#ccc"}},dark:{id:"dark",label:"Dark",bg:"black",body:"white",chart:{axis:"#eee",price:"#f0f",pricelabel:"#fff",bull:"#0c4",bear:"#f02",sma12:"#ff0",sma24:"#0ff",sma50:"#06f",sma72:"#00f",gridMajor:"#666",gridMinor:"#333"}}},Ji=(e,t,n)=>`https://min-api.cryptocompare.com/data/histo${Wn[n].toLowerCase()}?fsym=${t.substring(0,3)}&tsym=${t.substring(3)}&limit=168&aggregate=1&e=${e}`,Zi=e=>t=>e.next(t.target.value),Ee=(e,t,n)=>S(s=>es(null,{class:"w-100",onchange:Zi(e)},[[null,t,!0],...n],String(s))),Qi=ye("CCCAGG"),ct=ye("BTCUSD"),ut=ye(60),ft=ye("wma"),Te=ye("dark").transform(S(e=>Zn[e])),Re=Et();Re.subscribe({next:e=>alert(`An error occurred:
${e}`)});const eo=Zr(6e3).subscribe(ti("refresh")),to=ze({src:{market:Qi,symbol:ct,period:ut,refresh:eo},xform:S(e=>fetch(Ji(e.market,e.symbol,e.period)).then(t=>t.ok?t.json():Re.next("error loading OHLC data"),t=>Re.next(t.message)).then(t=>({...e,ohlc:t?t.Data:null})))}).subscribe(Qr({fail:e=>Re.next(e.message)})),no=ze({src:{response:to,avg:ft.transform(S(e=>Jn[e].fn))},xform:F(nn(({response:e})=>!!e.ohlc),S(({response:e,avg:t})=>Br({...e,min:({ohlc:n})=>te($e("low"),en(),n),max:({ohlc:n})=>te($e("high"),Qt(),n),tbounds:({ohlc:n})=>[n[0].time,n[n.length-1].time],sma:({ohlc:n})=>te(S(s=>[s,te(F($e("close"),t(s)),ue(),n)]),ue(),[12,24,50,72])})))}),so=ze({src:{data:no,theme:Te,window:Kr(window,"resize").transform(S(()=>[window.innerWidth,window.innerHeight]))},xform:S(({data:e,window:t,theme:n})=>{let[s,r]=t;const i=e.ohlc,o=s-2*E,c=r-2*re,l=Math.max(3,o/i.length),u=r-re,f=k=>Ye(k,0,i.length,E,s-E),h=k=>Ye(k,e.min,e.max,u,re),a=(k,_)=>Tn(k.map((O,T)=>[f(T+(i.length-k.length)+.5),h(O)]),{stroke:_,fill:"none"});let p=Ki[e.period];const y=e.tbounds[1]-e.tbounds[0];for(;o/(y/p)<60;)p*=2;const m=Wi[e.period],g=e.max-e.min,w=.0025,v=Math.max(c/8,50);let b=Math.pow(10,Math.floor(Math.log(g)/Math.log(10)))/2;for(;b>w&&c/(g/b)>v;)b/=2;for(;c/(g/b)<v;)b*=2;const A=i[i.length-1].close,M=s-E,C=h(A);return Ur({width:s,height:r,"font-family":"Arial","font-size":"10px"},Pt({stroke:n.chart.axis,fill:n.chart.axis,"text-anchor":"end"},N([E,re],[E,u]),N([E,u],[s-E,u]),st(k=>{const _=h(k);return[N([E-10,_],[E,_]),N([E,_],[s-E,_],{stroke:k%100<1?n.chart.gridMajor:n.chart.gridMinor,"stroke-dasharray":2}),Ie([E-15,_+4],k.toFixed(4),{stroke:"none"})]},fe(Math.ceil(e.min/b)*b,e.max,b)),st(k=>{const _=Ye(k,e.tbounds[0],e.tbounds[1],E+l/2,s-E-l/2);return[N([_,u],[_,u+10]),N([_,re],[_,u],{stroke:n.chart.gridMinor,"stroke-dasharray":2}),Ie([_,u+20],m(k),{stroke:"none","text-anchor":"middle"})]},fe(Math.ceil(e.tbounds[0]/p)*p,e.tbounds[1],p))),S(([k,_])=>a(_,n.chart[`sma${k}`]),e.sma),gt((k,_)=>{const O=_.open<_.close;let T,Xe,be;return O?(be=n.chart.bull,T=h(_.close),Xe=h(_.open)-T):(be=n.chart.bear,T=h(_.open),Xe=h(_.close)-T),Pt({fill:be,stroke:be},N([f(k+.5),h(_.low)],[f(k+.5),h(_.high)]),xr([f(k)+1,T],l-2,Xe))},i),N([E,C],[M,C],{stroke:n.chart.price}),On([[M,C],[M+10,C-8],[s,C-8],[s,C+8],[M+10,C+8]],{fill:n.chart.price}),Ie([M+12,C+4],A.toFixed(4),{fill:n.chart.pricelabel}))})});ze({src:{chart:so,theme:Te,symbol:ct.transform(Ee(ct,"Symbol pair",Yi)),period:ut.transform(Ee(ut,"Time frame",[...He(Wn)])),avg:ft.transform(Ee(ft,"Moving average",[...S(([e,t])=>[e,t.label],He(Jn))])),themeSel:Te.transform(S(e=>e.id),Ee(Te,"Theme",[...S(([e,t])=>[e,t.label],He(Zn))]))},xform:F(S(({theme:e,themeSel:t,chart:n,symbol:s,period:r,avg:i})=>["div",{class:`sans-serif f7 bg-${e.bg} ${e.body}`},n,["div.fixed",{style:{top:"1rem",right:`${E}px`,width:`calc(100vw - 2 * ${E}px)`}},["div.flex",...S(o=>["div.w-25.ph2",o],[s,r,i,t])]],["div.fixed.tc",{style:{bottom:"1rem",left:`${E}px`,width:`calc(100vw - 2 * ${E}px)`}},["a",{class:`mr3 b link ${e.body}`,href:"https://min-api.cryptocompare.com/"},"Data by cyptocompare.com"],["a",{class:`mr3 b link ${e.body}`,href:"https://github.com/thi-ng/umbrella/tree/develop/examples/crypto-chart/"},"Source"]]]),qi())});window.dispatchEvent(new CustomEvent("resize"));
